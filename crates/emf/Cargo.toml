[package]
name = "emf"
version = { workspace = true }
authors = { workspace = true }
edition = { workspace = true }
documentation = { workspace = true }
repository = { workspace = true }
license = { workspace = true }

[lib]
crate-type = ["cdylib", "lib"]
required-features = []

# To generate headers:
# cargo run -p emf --features headers --bin generate-headers

[[bin]]
name = "generate-headers"
required-features = ["headers"]

[dependencies]
anyhow = "1.0.86"
detours-sys = { workspace = true }
dynasmrt = { workspace = true }
libloading = "0.8.3"
libmem = { git = "https://github.com/rdbo/libmem.git", rev = "b7d34121c9eff952ec17ae058bf24640ee05e0b6" }
libmem-sys = { git = "https://github.com/rdbo/libmem.git", rev = "b7d34121c9eff952ec17ae058bf24640ee05e0b6" }
log = { workspace = true }
once_cell = "1.19.0"
path-clean = "1.0.1"
pelite = "0.10.0"
pretty_env_logger = { workspace = true }
safer-ffi = { workspace = true }
serde = { workspace = true }
toml = { workspace = true }
winapi = { workspace = true }

[features]
headers = ["safer-ffi/headers"]
